<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="UTF-8" />
  <meta http-equiv="X-UA-Compatible" content="IE=edge" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <link rel="stylesheet" href="./../css/reset.css" />
  <link rel="stylesheet" href="../css/navbar_sistema2.css" />
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0-beta2/css/all.min.css"
    integrity="sha512-YWzhKL2whUzgiheMoBFwW8CKV4qpHQAEuvilg9FAn5VJUDwKZZxkJNuGM4XkWuk94WCrrwslk8yWNGmY1EduTA=="
    crossorigin="anonymous" referrerpolicy="no-referrer" />
  <link rel="stylesheet" href="../css/home_gerente.css" />
  <link rel="sortcut icon" href="../imagens/icone_aviao.png" />
  <script type="text/javascript" src="../JS/funcoes.js"></script>
  <script src="../JS/navbar.js"></script>
  <title>Home Gerente</title>
</head>

<body>
  <header>
    <div class="menu">
      <div class="he-grid">
        <div class="logo_menu">
          <img src="../imagens/TOWER_TECH.png" />
        </div>
        <div class="menu_fechado">
          <img src="../imagens/icone_menu.png" id="menu" onclick="abrirMenuSistema()" />
        </div>
      </div>
    </div>

    <div class="header_desktop">
      <div class="grid_desktop">
        <div class="primeira_div">
          <img src="../imagens/TOWER_TECH.png" id="logo_menu_desktop" alt="" />
          <img class="img_usuario" src="../imagens/Fernanda.png" alt="" class="fernanda" />
          <h3>Bem Vindo(a), <span id="id_nome_usuario"></span>!</h3>
        </div>
        <div class="cadastro">
          <h5>CADASTRO</h5>
          <a href="./cad_funcionario.html"><button>Cadastrar funcionário</button></a>
        </div>
        <div class="localizacao">
          <h5>LOCALIZAÇÃO</h5>
          <div class="scrollLocalizacao">
            <a href="./dash_gerente.html">
              <div onclick="abrir_menu_maquinas()" class="torres">
                 <!-- <div class="a1">
                  <h3>Torre Congonhas</h3>
                </div> -->
              </div>
            </a>
            <!--<div class="torres">
              <div class="a1">
                <h3>Torre Congonhas</h3>
              </div>
              <div class="maquinas">
                <h3>Maquina 1</h3>
              </div>
              <div class="maquinas">
                <h3>Maquina 2</h3>
              </div>
              <div class="maquinas">
                <h3>Maquina 3</h3>
              </div>
            </div>
            <div class="torres">
              <div class="a1">
                <h3>Torre Congonhas</h3>
              </div>
            </div>
            <div class="torres">
              <div class="a1">
                <h3>Torre Congonhas</h3>
              </div>
            </div>
            <div class="torres">
              <div class="a1">
                <h3>Torre Congonhas</h3>
              </div>
            </div>
            <div class="torres">
              <div class="a1">
                <h3>Torre Congonhas</h3>
              </div>
            </div>
            <div class="torres">
              <div class="a1">
                <h3>Torre Congonhas</h3>
              </div>
            </div>
            <div class="torres">
              <div class="a1">
                <h3>Torre Congonhas</h3>
              </div>
            </div>
            <div class="torres">
              <div class="a1">
                <h3>Torre Congonhas</h3>
              </div>
            </div> -->
          </div>
        </div>
        <a onclick="logoff()"><i class="fas fa-sign-out-alt"></i></a>
      </div>
    </div>
  </header>

  <section>
    <h1>ALERTAS</h1>

    <div class="alertas">

      <!-- <div class="alerta alerta_vermelho">
        <h3>Equipe Congonhas</h3>
        <div class="descricao_alerta">
          <div>
            <h4>Localização</h4>
            <p>São Paulo - SP</p>
          </div>
          <div>
            <h4>Monitorando</h4>
            <p>Performance da equipe</p>
          </div>
        </div>
      </div>

      <div class="alerta alerta_laranja">
        <h3>Equipe Congonhas</h3>
        <div class="descricao_alerta">
          <div>
            <h4>Localização</h4>
            <p>São Paulo - SP</p>
          </div>
          <div>
            <h4>Monitorando</h4>
            <p>Performance da equipe</p>
          </div>
        </div>
      </div>
      <div class="alerta alerta_laranja">
        <h3>Equipe Congonhas</h3>
        <div class="descricao_alerta">
          <div>
            <h4>Localização</h4>
            <p>São Paulo - SP</p>
          </div>
          <div>
            <h4>Monitorando</h4>
            <p>Performance da equipe</p>
          </div>
        </div>
      </div>
      <div class="alerta alerta_laranja">
        <h3>Equipe Congonhas</h3>
        <div class="descricao_alerta">
          <div>
            <h4>Localização</h4>
            <p>São Paulo - SP</p>
          </div>
          <div>
            <h4>Monitorando</h4>
            <p>Performance da equipe</p>
          </div>
        </div>
      </div>
      <div class="alerta alerta_laranja">
        <h3>Equipe Congonhas</h3>
        <div class="descricao_alerta">
          <div>
            <h4>Localização</h4>
            <p>São Paulo - SP</p>
          </div>
          <div>
            <h4>Monitorando</h4>
            <p>Performance da equipe</p>
          </div>
        </div>
      </div>
      <div class="alerta alerta_laranja">
        <h3>Equipe Congonhas</h3>
        <div class="descricao_alerta">
          <div>
            <h4>Localização</h4>
            <p>São Paulo - SP</p>
          </div>
          <div>
            <h4>Monitorando</h4>
            <p>Performance da equipe</p>
          </div>
        </div>
      </div>
      <div class="alerta alerta_laranja">
        <h3>Equipe Congonhas</h3>
        <div class="descricao_alerta">
          <div>
            <h4>Localização</h4>
            <p>São Paulo - SP</p>
          </div>
          <div>
            <h4>Monitorando</h4>
            <p>Performance da equipe</p>
          </div>
        </div>
      </div>
      <div class="alerta alerta_laranja">
        <h3>Equipe Congonhas</h3>
        <div class="descricao_alerta">
          <div>
            <h4>Localização</h4>
            <p>São Paulo - SP</p>
          </div>
          <div>
            <h4>Monitorando</h4>
            <p>Performance da equipe</p>
          </div>
        </div>
      </div>
      <div class="alerta alerta_laranja">
        <h3>Equipe Congonhas</h3>
        <div class="descricao_alerta">
          <div>
            <h4>Localização</h4>
            <p>São Paulo - SP</p>
          </div>
          <div>
            <h4>Monitorando</h4>
            <p>Performance da equipe</p>
          </div>
        </div>
      </div>
      <div class="alerta alerta_laranja">
        <h3>Equipe Congonhas</h3>
        <div class="descricao_alerta">
          <div>
            <h4>Localização</h4>
            <p>São Paulo - SP</p>
          </div>
          <div>
            <h4>Monitorando</h4>
            <p>Performance da equipe</p>
          </div>
        </div>
      </div>
      <div class="alerta alerta_laranja">
        <h3>Equipe Congonhas</h3>
        <div class="descricao_alerta">
          <div>
            <h4>Localização</h4>
            <p>São Paulo - SP</p>
          </div>
          <div>
            <h4>Monitorando</h4>
            <p>Performance da equipe</p>
          </div>
        </div>
      </div> -->

    </div>
  </section>
</body>

</html>
<script src="../JS/home_gerente.js"></script>
<script>
  
  verificar_autenticacao()
  
  function passarValor(fkComputador, fkTorre){
    window.location = "dash_gerente.html?minhaVariavel="+fkComputador+fkTorre;
    }


    function get_fk_empresa() {
        var fkEmpresa = sessionStorage.getItem('fk_empresa_meuapp')
        qtdEquipe(fkEmpresa)
    } 

get_fk_empresa()

  function qtdComputadores(fkEmpresa) {
        fetch(`/usuarios/dadosEquipe/${fkEmpresa}`, { cache: 'no-store' }).then(function (response) {
          //${resposta[i].idComputador},
            if (response.ok) {                
                response.json().then(function (resposta) {
                    console.log(`Dados recebidos: ${JSON.stringify(resposta)}`);
                    console.log(resposta);  
                    for (var i = 0; i < resposta.length; i++) {
                      alertas.innerHTML += `
                      
                      <div class="alerta alerta_laranja" onclick="passarValor(${resposta[i].idTorre}),">
                                <h3>Equipe ${resposta[i].nomeTorre}</h3>
                                <div class="descricao_alerta">
                                  <div>
                                    <h4>Localização</h4>                                    
                                    <p>${resposta[i].nomeTorre}</p> 
                                    <p>${resposta[i].cidadeTorre} - ${resposta[i].estadoTorre}</p>
                                  </div>
                                  <div>
                                    <h4>Monitorando</h4>
                                    <p>Performance da equipe</p>
                                  </div>
                                </div>
                              </div>`                      
                    }
                    qtdTorre(fkEmpresa)
                    
                });
            } else {
                console.error('Nenhum dado encontrado ou erro na API');
            }
        })
            .catch(function (error) {
                console.error(`Erro na obtenção dos dados: ${error.message}`);
            });

        return false;
    }


    
// // funcao para gerar alertas
// nomeMaq = idNomeMaq.value = fkComputador.json;
// nomeTorre.value = 
// // dados = [];
// // dadosMonitorados.value = dados;

// function abrirAlerta() {
//      fetch(/leitura/dadosMonitoramento, { cache: 'no-store' }).then(function (response) { 
//          if (response.ok) {
//              response.json().then(function (resposta) {
//                 console.log(`Dados recebidos: ${JSON.stringify(resposta)}`);
//                 resposta.reverse();
                
//                 if(cpuPorcentagem.json >= 8000 || ramPorcentagem.json >= 8000 || discoPorcentagem.json >= 8000) {
//                      function addNewComponent(componentName) {
//                         document.getElementById(".alertas_critico").innerHTML +=
//                             '<div class="alerta_vermelho">' +
//                                 '<h3>Máquina <span id="idNomeMaq">X</span></h3>' + 
//                                 '<div class="descricao_alerta">' +
//                                     '<div>' +
//                                         '<h4>Localização</h4>' +
//                                         '<p id="nomeTorre" name="nomeTorre">Torre Viracopos</p>' +
//                                     '</div>' +
//                                     '<div>' +
//                                         '<h4>Monitorando</h4>' +
//                                         '<p id="dadosMonitorados" name="dadosMonitorados">CPU, RAM, Disco, Internet, Usuário</p>' +
//                                     '</div>'
//                                 '</div>'
//                             '</div>' +
//                             `${componentName}`;
        
//                         alerta_vermelho.style.border = "1px solid #FF0000";    
        
//                         if(nomeMaq.length[0] > 1) {
//                             alerta_vermelho.style.border = "1px solid #FF0000";
//                         }
        
//                      } 
        
//                 } else if(cpuPorcentagem.json >= 6000 && cpuPorcentagem <= 8000 || ramPorcentagem.json >= 6000 && ramPorcentagem <= 8000 || discoPorcentagem.json >= 6000 && discoPorcentagem <= 8000) {
//                      function addNewComponent(componentName) {
//                         document.getElementById(".alertas_atencao").innerHTML +=
//                             '<div class="alerta_vermelho">' +
//                                 '<h3>Máquina <span id="idNomeMaq">X</span></h3>' + 
//                                 '<div class="descricao_alerta">' +
//                                     '<div>' +
//                                         '<h4>Localização</h4>' +
//                                         '<p name="nomeTorre">Torre Viracopos</p>' +
//                                     '</div>' +
//                                     '<div>' +
//                                         '<h4>Monitorando</h4>' +
//                                         '<p id="dadosMonitorados" name="dadosMonitorados">CPU, RAM, Disco, Internet, Usuário</p>' +
//                                     '</div>'
//                                 '</div>'
//                             '</div>' +
//                             `${componentName}`;
        
//                         alerta_vermelho.style.border = "1px solid #FFA903;";    
        
//                         if(nomeMaq.length[0] > 1) {
//                             alerta_vermelho.style.border = "1px solid #FFA903;";
//                         }
        
//                     }
                
//                 }
                
//              });

//          } else {
//              console.error('Nenhum dado encontrado ou erro na API');
//          }
//      })
//          .catch(function (error) {
//             console.error(`Erro na obtenção dos dados: ${error.message}`);
//          });
// }


</script>